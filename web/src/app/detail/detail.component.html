<div class="container">
    <h2 class="my-3 text-center">{{ symbol.societa }}</h2>
    <div class="my-3" align="center">
        <span>Seleziona la strategia:</span>
        <select class="mt-2 form-select" [(ngModel)]="selectedStrategy" 
            (change)="onStrategySelected()" style="width: 30%;">
            <option selected [ngValue]="null"></option>
            <option [ngValue]="1">Bande di Bollinger</option>
            <option [ngValue]="2">IoInvesto</option>
        </select>
    </div>
    <div class="description" [innerHTML]="selectedStrategyDesc"></div>
    <div class="mt-4" id="main" style="width: 100%;height:550px;"></div>
    <h3 class="text-center my-3" >N.B: il tooltip presenta i valori di apertura e chiusura invertiti!</h3>
    
    <table class="table my-4 table-striped table-detail">
        <caption class="table-detail">Dettagli ultima candela</caption>
        <tbody>
          <tr>
            <th class="text-center" scope="row">Apertura:</th>
            <td class="text-center">{{ symbol.apertura }}€</td>
          </tr>
          <tr>
            <th class="text-center" scope="row">Chiusura:</th>
            <td class="text-center">{{ symbol.chiusura }}€</td>
          </tr>
          <tr>
            <th class="text-center" scope="row">Variazione:</th>
            <td class="text-center" [ngClass]="{'negative-variation': symbol.variazione < 0, 
            'positive-variation': symbol.variazione >= 0}">{{ symbol.variazione | number : '1.2-2'}}%</td>
          </tr>
          <ng-container *ngIf="selectedStrategy == 1">
            <tr>
                <th class="text-center" scope="row">EMA 200:</th>
                <td class="text-center">{{ symbol.ema200Series[symbol.ema200Series.length - 1] | number : '1.2-2' }}€</td>
            </tr>
            <tr>
                <th class="text-center" scope="row">Banda di Bollinger inferiore: </th>
                <td class="text-center"> {{ symbol.lbbSeries[symbol.lbbSeries.length - 1] | number : '1.2-2' }}€</td>
            </tr>
            <tr>
                <th class="text-center" scope="row">RSI: </th>
                <td *ngIf="symbol.rsi[symbol.rsi.length - 1] >= 50" class="text-center positive-variation">{{ symbol.rsi[symbol.rsi.length - 1] }}</td>
                <td *ngIf="symbol.rsi[symbol.rsi.length - 1] < 50" class="text-center negative-variation">{{ symbol.rsi[symbol.rsi.length - 1] }}</td>
            </tr>
            <tr>
                <th class="text-center" scope="row">Posizione: </th>
                <td *ngIf="symbol.strategie['ReyReno'] == 1" class="text-center positive-variation">Buy/Hold</td>
                <td *ngIf="symbol.strategie['ReyReno'] == 0" class="text-center negative-variation">Sell</td>
            </tr>
          </ng-container>
          <ng-container *ngIf="selectedStrategy == 2">
            <tr>
                <th class="text-center" scope="row">EMA 20 Massimi:</th>
                <td class="text-center">{{ symbol.ema20High[symbol.ema20High.length - 1] | number : '1.2-2' }}€</td>
            </tr>
            <tr>
                <th class="text-center" scope="row">EMA 20 Mimini: </th>
                <td class="text-center"> {{ symbol.ema20Low[symbol.ema20Low.length - 1] | number : '1.2-2' }}€</td>
            </tr>
            <tr>
                <th class="text-center" scope="row">EMA 144: </th>
                <td class="text-center"> {{ symbol.ema144Series[symbol.ema144Series.length - 1] | number : '1.2-2' }}€</td>
            </tr>
            <tr>
                <th class="text-center" scope="row">Posizione: </th>
                <td *ngIf="symbol.strategie['IoInvesto'] == 1" class="text-center positive-variation">Buy/Hold</td>
                <td *ngIf="symbol.strategie['IoInvesto'] == 0" class="text-center negative-variation">Sell</td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    <div style="margin-bottom: 100px;"></div>
</div>