<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="/dashboard">Multiday trading explorer</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/dashboard">Dashboard</a>
                </li>
            </ul>
            <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"
                    [disabled]="true">
                <button class="btn btn-outline-success" type="submit" [disabled]="true">Search</button>
            </form>
        </div>
    </div>
</nav>
<div class="container">
    <h2 class="my-3 text-center">{{ symbol.societa }}</h2>
    <div class="my-3" align="center">
        <span>Seleziona la strategia:</span>
        <select class="mt-2 form-select" [(ngModel)]="selectedStrategy" 
            (change)="onStrategySelected()" style="width: 30%;">
            <option selected [ngValue]="null"></option>
            <option [ngValue]="1">Bande di Bollinger</option>
            <option [ngValue]="2">IoInvesto</option>
        </select>
    </div>
    <div class="description" [innerHTML]="selectedStrategyDesc"></div>
    <div class="mt-4" id="main" style="width: 100%;height:550px;"></div>
    <h3 class="text-center mb-3" >N.B: il tooltip presenta i valori di apertura e chiusura invertiti!</h3>
    <div class="row text-center mb-2">
        <div class="col">
            <span style="font-weight:bold;">Apertura: </span> {{ symbol.apertura }}€
        </div>
        <div class="col">
            <span style="font-weight:bold;">Chiusura: </span> {{ symbol.chiusura }}€
        </div>
        <div class="col">
            <span style="font-weight:bold;">Variazione: </span>
            <span [ngClass]="{'negative-variation': symbol.variazione < 0, 
            'positive-variation': symbol.variazione >= 0}">{{ symbol.variazione | number : '1.2-2'}}%</span>
        </div>
    </div>
    <div *ngIf="selectedStrategy == 1">
        <div class="row text-center">
            <div class="col">
                <span style="font-weight:bold;">EMA 200: </span>{{ symbol.ema20High[symbol.ema20High.length - 1] | number : '1.2-2' }}€
            </div>
            <div class="col">
                <span style="font-weight:bold;">Banda di Bollinger inferiore: </span>{{ symbol.lbbSeries[symbol.lbbSeries.length - 1] | number : '1.2-2' }}€
            </div>
            <div class="col">
                <span style="font-weight:bold;">RSI: </span>
                <span *ngIf="symbol.rsi[symbol.rsi.length - 1] >= 50" class="positive-variation">{{ symbol.rsi[symbol.rsi.length - 1] }}</span>
                <span *ngIf="symbol.rsi[symbol.rsi.length - 1] < 0" class="negative-variation">{{ symbol.rsi[symbol.rsi.length - 1] }}</span>
            </div>
            <div class="col">
                <span style="font-weight:bold;">Posizione: </span>
                <span *ngIf="symbol.strategie['ReyReno'] == 1" class="positive-variation">Buy/Hold</span>
                <span *ngIf="symbol.strategie['ReyReno'] == 0" class="negative-variation">Sell</span>
            </div>
        </div>
    </div>
    <div *ngIf="selectedStrategy == 2">
        <div class="row text-center">
            <div class="col">
                <span style="font-weight:bold;">EMA 20 Massimi: </span>{{ symbol.ema20High[symbol.ema20High.length - 1] }}€
            </div>
            <div class="col">
                <span style="font-weight:bold;">EMA 20 minimi: </span>{{ symbol.ema20Low[symbol.ema20Low.length - 1] }}€
            </div>
            <div class="col">
                <span style="font-weight:bold;">EMA 144: </span>{{ symbol.ema144[symbol.ema144.length - 1] }}€
            </div>
            <div class="col">
                <span style="font-weight:bold;">Posizione: </span>
                <span *ngIf="symbol.strategie['IoInvesto'] == 1" class="positive-variation">Buy/Hold</span>
                <span *ngIf="symbol.strategie['IoInvesto'] == 0" class="negative-variation">Sell</span>
            </div>
        </div>
    </div>
    <div style="margin-bottom: 100px;"></div>
</div>